!function e(){let t=["gclid","msclkid","fbclid"],r="minerx",a="presell_params",n="presell_params_expiry",o=[/googlebot\//i,/bingbot/i,/facebookexternalhit\//i,/pageburst/i,],l="undefined"!=typeof window&&window.__PRESSELL_KEY_MAP__||{},i={},u="[presell-param-script]";function c(e){if(null==e)return!1;let t=String(e).trim().toLowerCase();return!t||"1"===t||"true"===t||"yes"===t}function s(e){if(e&&"object"==typeof e.dataset&&e.dataset&&void 0!==e.dataset.mxhref&&c(e.dataset.mxhref))return!0;if(e&&"function"==typeof e.getAttribute){let t=e.getAttribute("data-mxhref");if(c(t))return!0;let r=e.getAttribute("mxhref");if(c(r))return!0}return!1}function f(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(t){return e}}function p(e){if(!e)return"";let t=l[e];return t?String(t):e}function m(e){if(!e||"object"!=typeof e)return[];let r={};Object.keys(e).forEach(t=>{if(!t)return;let a=e[t];null!=a&&""!==a&&(r[t]=function e(t,r){if("tid"===t){var a;return String(a=r).replace(/ /g,"_s_").replace(/-/g,"_d_").replace(/\//g,"")}return String(r)}(t,a))});let a=Object.keys(r);if(!a.length)return[];let n=function e(r){for(let a=0;a<t.length;a+=1){let n=t[a],o=r[n];if(null!=o&&""!==o)return n}return null}(r),o="undefined"!=typeof window&&"function"==typeof window.__PRESSELL_BUILD_QUERY__?window.__PRESSELL_BUILD_QUERY__:null;if(o)try{let l=o(n,r);if(Array.isArray(l)){let i=new Set;return l.map(e=>{if(!e||"object"!=typeof e)return null;let t=e.key&&String(e.key).trim()?String(e.key).trim():null,r=void 0!==e.value&&null!==e.value?String(e.value):"";return!t||""===r||i.has(t)?null:(i.add(t),{key:t,value:r})}).filter(Boolean)}}catch(c){console.warn(u,"Falha ao executar builder de sequ\xeancia customizado.",c)}let s=[],f=new Set,m=(e,t)=>{!(!e||""===t||f.has(e))&&(s.push({key:e,value:String(t)}),f.add(e))};if(n){let h=p(n)||String(n).trim();m(h,r[n])}return a.forEach(e=>{if(e===n)return;let t=p(e)||String(e).trim();m(t,r[e])}),s}function h(e){return e?`${r}_${e}`:null}function d(e){return e?`${r}_${e}__expiry`:null}function g(e,t){let r=h(e),o=d(e);if(!r||!o){console.warn(u,"Namespace inv\xe1lido para salvar par\xe2metros.");return}try{window.localStorage.setItem(r,JSON.stringify(t)),window.localStorage.setItem(o,String(Date.now()+2592e6)),window.localStorage.removeItem(a),window.localStorage.removeItem(n)}catch(l){console.warn(u,"Falha ao salvar par\xe2metros no localStorage.",l)}}function y(e,t,r){if(!t||!e)return!1;if(!r)return!0;try{return new URL(e,window.location&&window.location.href),!0}catch(a){return console.warn(u,"N\xe3o foi poss\xedvel analisar a URL alvo. Ignorando item.",a),!1}}function v(e,t,r,a=null){let n=Array.isArray(a)?a:m(t);if(!n.length)return e;if(!r)return k(e,n);try{let o=new URL(e,window.location&&window.location.href);return n.forEach(e=>{e&&e.key&&!o.searchParams.has(e.key)&&o.searchParams.set(e.key,e.value)}),o.toString()}catch(l){return console.warn(u,"Falha ao anexar par\xe2metros via URL API. Usando fallback.",l),k(e,n)}}function k(e,t){let[r,a=""]=e.split("#"),n=a?`#${a}`:"",o=-1!==r.indexOf("?"),l=[],i=new Set;return(t.forEach(e=>{if(!e||!e.key||""===e.value||i.has(e.key)||function e(t,r){var a;if(!r)return!1;let n=RegExp(`[?&]${String(a=r).replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}(=|&|$)`,"i");return n.test(t)}(r,e.key))return;let t=encodeURIComponent(e.value);l.push(`${encodeURIComponent(e.key)}=${t}`),i.add(e.key)}),l.length)?`${r}${o?"&":"?"}${l.join("&")}${n}`:e}function $(e,t,r,a){let n=e.match(/^function\s*[^(]*\(([^)]*)\)\s*{([\s\S]*)}$/);if(!n)return console.warn(u,"N\xe3o foi poss\xedvel interpretar o handler do bot\xe3o."),null;let o=n[1].trim(),l=n[2].replace(r,a),i=o?o.split(",").map(e=>e.trim()).filter(Boolean):[];try{return Function.apply(null,[...i,l])}catch(c){return console.warn(u,"Erro ao reconstruir o handler do bot\xe3o.",c),t}}try{!function e(){console.log(u,"Iniciando propaga\xe7\xe3o de par\xe2metros.");let t=function e(){if("undefined"==typeof window||!window.location)return null;let{hostname:t,pathname:r}=window.location,a="string"==typeof t&&t.trim()?t.trim().toLowerCase():"localhost",n=function e(t){if("string"!=typeof t||!t.trim())return"/";let r=t.trim();return(r.startsWith("/")||(r=`/${r}`),r=r.replace(/\/+$/,""))?r:"/"}(r);return"/"===n?a:`${a}${n}`}();if(t||console.warn(u,"N\xe3o foi poss\xedvel determinar namespace atual."),function e(t){if(!t||"string"!=typeof t)return!1;let r=t.toLowerCase();return o.some(e=>e.test(r))}(window.navigator&&window.navigator.userAgent)){console.log(u,"Agente identificado como crawler. Execu\xe7\xe3o interrompida.");return}let r="function"==typeof URL&&"function"==typeof URLSearchParams,l=function e(t){if(!t)return{};let r={},a;try{a=new URLSearchParams(t)}catch(n){return console.warn(u,"URLSearchParams indispon\xedvel. Realizando parse manual.",n),function e(t){let r={},a="?"===t.charAt(0)?t.slice(1):t;return a.split("&").forEach(e=>{if(!e)return;let[t,a=""]=e.split("="),n=f(t);n&&(r[n]=f(a))}),r}(t)}return a.forEach((e,t)=>{null!==e&&t&&(r[t]=f(e))}),r}(window.location&&window.location.search);console.log(u,"Par\xe2metros detectados na URL atual:",l);let c=Object.keys(l).length?l:function e(t){let r=[];t&&r.push({dataKey:h(t),expiryKey:d(t),migrateToNamespace:!1}),r.push({dataKey:a,expiryKey:n,migrateToNamespace:t});for(let o=0;o<r.length;o+=1){let l=r[o];try{let i=window.localStorage.getItem(l.expiryKey),c=window.localStorage.getItem(l.dataKey);if(!i||!c)continue;let s=parseInt(i,10);if(Number.isNaN(s)||Date.now()>s){window.localStorage.removeItem(l.dataKey),window.localStorage.removeItem(l.expiryKey);continue}let f=JSON.parse(c);if(f&&"object"==typeof f)return l.migrateToNamespace&&t&&l.dataKey===a&&(t&&g(t,f),window.localStorage.removeItem(a),window.localStorage.removeItem(n)),f}catch(p){console.warn(u,"N\xe3o foi poss\xedvel ler par\xe2metros armazenados.",p)}}return{}}(t);if(!c||!Object.keys(c).length){console.log(u,"Nenhum par\xe2metro rastreado encontrado. Propaga\xe7\xe3o n\xe3o necess\xe1ria.");return}Object.keys(l).length&&(g(t,l),c=l),i=c,console.log(u,"Par\xe2metros ativos em sess\xe3o:",i);let p=()=>{console.log(u,"Iniciando ciclo de propaga\xe7\xe3o para links, bot\xf5es e forms.");let e=function e(t,r){let a=document.getElementsByTagName("a"),n=m(t);if(!n.length)return console.log(u,"Nenhum par\xe2metro dispon\xedvel para anexar aos links."),0;let o=0,l=0;for(let i=0;i<a.length;i+=1){let c=a[i];o+=1;let f=c&&"function"==typeof c.getAttribute?c.getAttribute("href"):null;if(!f||f.startsWith("mailto:")||f.startsWith("tel:")||f.startsWith("javascript:"))continue;let p=s(c);if(y(f,p,r))try{let h=c.hash||"",d=v(f,t,r,n);d&&(c.href=d,h&&c.hash!==h&&(c.hash=h),l+=1)}catch(g){console.warn(u,"Falha ao atualizar URL do link.",g)}}return console.log(u,`Links analisados=${o} atualizados=${l}`),l}(c,r),t=function e(t,r){let a=document.getElementsByTagName("button"),n=m(t);if(!n.length)return console.log(u,"Nenhum par\xe2metro dispon\xedvel para anexar aos bot\xf5es."),0;let o=0,l=0;for(let i=0;i<a.length;i+=1){let c=a[i],f=c&&c.onclick;if("function"==typeof f)try{o+=1;let p=f.toString(),h=p.match(/location\.href\s*=\s*['"`]([^'"`]+)['"`]/),d=p.match(/window\.open\s*\(\s*['"`]([^'"`]+)['"`]/),g=h&&h[1]||d&&d[1];if(!g)continue;let k=s(c);if(!y(g,k,r))continue;let w=v(g,t,r,n);if(!w)continue;let _=h&&$(p,f,h[1],w)||d&&$(p,f,d[1],w);_&&(c.onclick=_,l+=1)}catch(b){console.warn(u,"Falha ao inspecionar o handler do bot\xe3o.",b)}}return console.log(u,`Bot\xf5es analisados=${o} atualizados=${l}`),l}(c,r),a=function e(t){let r=document.getElementsByTagName("form"),a=m(t);if(!a.length)return console.log(u,"Nenhum par\xe2metro dispon\xedvel para anexar aos formul\xe1rios."),0;let n=0,o=0;for(let l=0;l<r.length;l+=1){let i=r[l],c=s(i);c&&(n+=1,a.forEach(e=>{if(e&&e.key&&""!==e.value&&!i.querySelector(`input[name="${e.key}"]`))try{let t=document.createElement("input");t.type="hidden",t.name=e.key,t.value=e.value,i.appendChild(t),o+=1}catch(r){console.warn(u,"Falha ao anexar input hidden ao formul\xe1rio.",r)}}))}return console.log(u,`Formul\xe1rios analisados=${n} inputsInclu\xeddos=${o}`),o}(c);console.log(u,"Propaga\xe7\xe3o finalizada.",`anchors=${e}`,`buttons=${t}`,`forms=${a}`)};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",p,{once:!0}):p()}()}catch(w){console.error(u,"Erro inesperado durante a inicializa\xe7\xe3o.",w)}}();